<script type="module">
import { getDatabase, ref, push, onValue, remove } 
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyAg421ivUVYIWikXKmUchs8KFiuKHmRcE4",
  authDomain: "convite-guilherme.firebaseapp.com",
  databaseURL: "https://convite-guilherme-default-rtdb.firebaseio.com",
  projectId: "convite-guilherme",
  storageBucket: "convite-guilherme.firebasestorage.app",
  messagingSenderId: "967694475264",
  appId: "1:967694475264:web:72078b694e3b0a1211f8e5"
};

// Firebase
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const convidadosRef = ref(db, "convidados");
  import { initializeApp } 
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";


// HTML
const nome = document.getElementById("nome");
const resposta = document.getElementById("resposta");
const senha = document.getElementById("senha");
const admin = document.getElementById("admin");
const lista = document.getElementById("lista");

// BOTÃƒO CONFIRMAR
window.confirmar = function () {
  if (!nome.value || !resposta.value) {
    alert("Preencha tudo");
    return;
  }

  push(convidadosRef, {
    nome: nome.value,
    resposta: resposta.value
  });

  nome.value = "";
  resposta.value = "";
  alert("PresenÃ§a confirmada ðŸŽ‰");
};

// LOGIN ADMIN
window.abrirAdmin = function () {
  if (senha.value !== "gui15") {
    alert("Senha incorreta");
    return;
  }

  admin.style.display = "block";
  lista.innerHTML = "";

  onValue(convidadosRef, (snap) => {
    lista.innerHTML = "";
    snap.forEach((c) => {
      const li = document.createElement("li");
      li.textContent = `${c.val().nome} - ${c.val().resposta} `;

      const btn = document.createElement("button");
      btn.textContent = "âŒ";
      btn.onclick = () => apagar(c.key);

      li.appendChild(btn);
      lista.appendChild(li);
    });
  });
};

// APAGAR CONVIDADO
window.apagar = function (id) {
  remove(ref(db, "convidados/" + id));
};
</script>
